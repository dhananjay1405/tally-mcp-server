<?xml version="1.0" encoding="utf-8"?>
<ENVELOPE>
    <HEADER>
        <VERSION>1</VERSION>
        <TALLYREQUEST>Export</TALLYREQUEST>
        <TYPE>Data</TYPE>
        <ID>MyTallyLiveReport</ID>
    </HEADER>
    <BODY>
        <DESC>
            <STATICVARIABLES>
                <SVEXPORTFORMAT>$$SysName:XML</SVEXPORTFORMAT>
                <SVFROMDATE>{fromDate}</SVFROMDATE>
                <SVTODATE>{toDate}</SVTODATE>
                <nunjuck>if targetCompany</nunjuck>
                <SVCURRENTCOMPANY>{{targetCompany | escape}}</SVCURRENTCOMPANY>
                <nunjuck>endif</nunjuck>
            </STATICVARIABLES>
            <TDL>
                <TDLMESSAGE>
                    <REPORT NAME="MyTallyLiveReport">
                        <FORMS>MyForm</FORMS>
                    </REPORT>
                    <FORM NAME="MyForm">
                        <PARTS>MyPart01</PARTS>
                        <XMLTAG>DATA</XMLTAG>
                    </FORM>
                    <PART NAME="MyPart01">
                        <LINES>MyLine01,MyLineOp</LINES>
                        <REPEAT>MyLine01 : MyCollection</REPEAT>
                        <SCROLLED>Vertical</SCROLLED>
                    </PART>
                    <LINE NAME="MyLine01">
                        <FIELDS>FldDate,FldVoucherType,FldVoucherNumber,FldPartyLedger,FldQuantity,FldAmount,FldNarration,FldTrackingNumber,FldVoucherTypeParent</FIELDS>
                        <XMLTAG>ROW</XMLTAG>
                    </LINE>
                    <LINE NAME="MyLineOp">
                        <FIELDS>FldDateOp,FldVoucherTypeOp,FldVoucherNumberOp,FldPartyLedgerOp,FldQuantityOp,FldAmountOp,FldNarrationOp,FldTrackingNumberOp,FldVoucherTypeParentOp</FIELDS>
                        <XMLTAG>ROW</XMLTAG>
                    </LINE>
                    <FIELD NAME="FldDate">
                        <SET>$Date</SET>
                        <XMLTAG>F01</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldVoucherType">
                        <SET>$VoucherTypeName</SET>
                        <XMLTAG>F02</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldVoucherNumber">
                        <SET>$VoucherNumber</SET>
                        <XMLTAG>F03</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldPartyLedger">
                        <SET>$PartyLedgerName</SET>
                        <XMLTAG>F04</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldQuantity">
                        <SET>if $$IsInwards:$AllInventoryEntries[1,@@FilterItemEqual].BilledQty then $$Number:$AllInventoryEntries[1,@@FilterItemEqual].BilledQty else -$$Number:$AllInventoryEntries[1,@@FilterItemEqual].BilledQty</SET>
                        <XMLTAG>F05</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldAmount">
                        <SET>if $$IsDebit:($AllInventoryEntries[1,@@FilterItemEqual].Amount) then -$$NumValue:$AllInventoryEntries[1,@@FilterItemEqual].Amount else $$NumValue:$AllInventoryEntries[1,@@FilterItemEqual].Amount</SET>
                        <XMLTAG>F06</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldNarration">
                        <SET>$Narration</SET>
                        <XMLTAG>F07</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldTrackingNumber">
                        <SET>if ($$IsEmpty:$AllInventoryEntries[1,@@FilterItemEqual].TrackingNumber or $$IsNotApplicable:$AllInventoryEntries[1,@@FilterItemEqual].TrackingNumber) then "" else $AllInventoryEntries[1,@@FilterItemEqual].TrackingNumber</SET>
                        <XMLTAG>F08</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldVoucherTypeParent">
                        <SET>$Parent:VoucherType:$VoucherTypeName</SET>
                        <XMLTAG>F09</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldDateOp">
                        <SET>##SVFromDate</SET>
                        <XMLTAG>F01</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldVoucherTypeOp">
                        <SET>"Opening"</SET>
                        <XMLTAG>F02</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldVoucherNumberOp">
                        <SET>""</SET>
                        <XMLTAG>F03</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldPartyLedgerOp">
                        <SET>""</SET>
                        <XMLTAG>F04</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldQuantityOp">
                        <SET>if $$IsInwards:$OpeningBalance:StockItem:"{itemName}" then $$NumValue:$OpeningBalance:StockItem:"{itemName}" else -$$NumValue:$OpeningBalance:StockItem:"{itemName}"</SET>
                        <XMLTAG>F05</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldAmountOp">
                        <SET>if $$IsDebit:$OpeningValue:StockItem:"{itemName}" then -$$NumValue:$OpeningValue:StockItem:"{itemName}" else $$NumValue:$OpeningValue:StockItem:"{itemName}"</SET>
                        <XMLTAG>F06</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldNarrationOp">
                        <SET>""</SET>
                        <XMLTAG>F07</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldTrackingNumberOp">
                        <SET>""</SET>
                        <XMLTAG>F08</XMLTAG>
                    </FIELD>
                    <FIELD NAME="FldVoucherTypeParentOp">
                        <SET>"Opening"</SET>
                        <XMLTAG>F09</XMLTAG>
                    </FIELD>
                    <COLLECTION NAME="MyCollection">
                        <TYPE>Voucher</TYPE>
                        <FETCH>AllInventoryEntries,Narration,PartyLedgerName</FETCH>
                        <FILTER>FilterStockItem,FilterExcludeOrderVch,FilterCancelledVouchers,FilterOptionalVouchers</FILTER>
                    </COLLECTION>
                    <SYSTEM TYPE="Formulae" NAME="FilterStockItem">NOT $$IsEmpty:$AllInventoryEntries[1,@@FilterItemEqual].StockItemName</SYSTEM>
                    <SYSTEM TYPE="Formulae" NAME="FilterItemEqual">$StockItemName = "{itemName}"</SYSTEM>
                    <SYSTEM TYPE="Formulae" NAME="FilterInventoryVch">$$IsInventoryVch:$VoucherTypeName</SYSTEM>
                    <SYSTEM TYPE="Formulae" NAME="FilterExcludeOrderVch">NOT $$IsOrderVch:$VoucherTypeName</SYSTEM>
                    <SYSTEM TYPE="Formulae" NAME="FilterCancelledVouchers">NOT $IsCancelled</SYSTEM>
                    <SYSTEM TYPE="Formulae" NAME="FilterOptionalVouchers">NOT $IsOptional</SYSTEM>
                </TDLMESSAGE>
            </TDL>
        </DESC>
    </BODY>
</ENVELOPE>